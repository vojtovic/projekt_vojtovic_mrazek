(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[5516],{29307:function(k,T,r){(function(e,f){k.exports=f(r(53547))})(this,function(e){return function(f){var v={};function s(t){if(v[t])return v[t].exports;var a=v[t]={i:t,l:!1,exports:{}};return f[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=f,s.c=v,s.d=function(t,a,c){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:c})},s.r=function(t){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a||4&a&&typeof t=="object"&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&a&&typeof t!="string")for(var g in t)s.d(c,g,function(P){return t[P]}.bind(null,g));return c},s.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="",s(s.s=86)}({0:function(f,v){f.exports=e},86:function(f,v,s){"use strict";s.r(v);var t=s(0);function a(){return(a=Object.assign||function(c){for(var g=1;g<arguments.length;g++){var P=arguments[g];for(var d in P)Object.prototype.hasOwnProperty.call(P,d)&&(c[d]=P[d])}return c}).apply(this,arguments)}v.default=function(c){return t.createElement("svg",a({width:"1em",height:"1em",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c),t.createElement("path",{d:"M0 4a4 4 0 014-4h24a4 4 0 014 4v24a4 4 0 01-4 4H4a4 4 0 01-4-4V4z",fill:"#AC73E6"}),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.027 13.839c-3.19-.836-6.305-1.064-10.18-.608-1.215.152-1.063 1.975.076 2.203.304.836.456 2.355.912 3.267.987 2.279 5.622 1.975 7.369.835 1.14-.683 1.443-2.279 1.9-3.494.227-.684 1.595-.684 1.822 0 .38 1.215.76 2.81 1.9 3.494 1.747 1.14 6.381 1.444 7.369-.835.456-.912.607-2.431.911-3.267 1.14-.228 1.216-2.051.076-2.203-3.874-.456-6.989-.228-10.18.608-.455.075-1.519.075-1.975 0z",fill:"#fff"}))}}})})},24556:function(k,T,r){(function(e,f){k.exports=f(r(53547))})(this,function(e){return function(f){var v={};function s(t){if(v[t])return v[t].exports;var a=v[t]={i:t,l:!1,exports:{}};return f[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}return s.m=f,s.c=v,s.d=function(t,a,c){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:c})},s.r=function(t){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a||4&a&&typeof t=="object"&&t&&t.__esModule)return t;var c=Object.create(null);if(s.r(c),Object.defineProperty(c,"default",{enumerable:!0,value:t}),2&a&&typeof t!="string")for(var g in t)s.d(c,g,function(P){return t[P]}.bind(null,g));return c},s.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="",s(s.s=187)}({0:function(f,v){f.exports=e},187:function(f,v,s){"use strict";s.r(v);var t=s(0);function a(){return(a=Object.assign||function(c){for(var g=1;g<arguments.length;g++){var P=arguments[g];for(var d in P)Object.prototype.hasOwnProperty.call(P,d)&&(c[d]=P[d])}return c}).apply(this,arguments)}v.default=function(c){return t.createElement("svg",a({width:"1em",height:"1em",viewBox:"0 0 24 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},c),t.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.571 18.272H10.43v-8.47H2.487a.2.2 0 01-.14-.343L11.858.058a.2.2 0 01.282 0l9.513 9.4a.2.2 0 01-.14.343H13.57v8.47zM2.2 21.095a.2.2 0 00-.2.2v2.424c0 .11.09.2.2.2h19.6a.2.2 0 00.2-.2v-2.424a.2.2 0 00-.2-.2H2.2z",fill:"#212134"}))}}})})},35762:(k,T,r)=>{"use strict";r.d(T,{Z:()=>c});var e=r(23724),f=r(68547),v=r(63955),s=(g,P,d)=>new Promise((B,b)=>{var S=i=>{try{O(d.next(i))}catch(R){b(R)}},x=i=>{try{O(d.throw(i))}catch(R){b(R)}},O=i=>i.done?B(i.value):Promise.resolve(i.value).then(S,x);O((d=d.apply(g,P)).next())});const t=()=>s(void 0,null,function*(){const{data:g}=yield v.be.get("/admin/plugins");return g}),c=g=>{const P=(0,f.useNotification)();return(0,e.useQuery)("list-installed-plugins",()=>t(),{onSuccess:()=>{g&&g()},onError:()=>{P({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})}},26383:(k,T,r)=>{"use strict";r.r(T),r.d(T,{MarketPlacePage:()=>q,default:()=>qe});var e=r(53547),f=r(97132),v=r(15482),s=r(23724),t=r(63852),a=r(68547),c=r(35395),g=r(80117),P=r(36565),d=r(94117),B=r(67422),b=r(33483),S=r(40264),x=r(1738),O=r(45697),i=r.n(O),R=r(33699),le=r(26485),oe=r.n(le),D=r(78384);const ie=(0,D.default)(d.Box)`
  background: ${({theme:n})=>`linear-gradient(180deg, rgba(234, 234, 239, 0) 0%, ${n.colors.neutral150} 100%)`};
  opacity: 0.33;
`,ce=()=>e.createElement(c.GridLayout,null,Array(12).fill(null).map((n,l)=>e.createElement(ie,{key:`empty-plugin-card-${l}`,height:"234px",hasRadius:!0}))),H=({content:n})=>e.createElement(d.Box,{position:"relative"},e.createElement(ce,null),e.createElement(d.Box,{position:"absolute",top:11,width:"100%"},e.createElement(S.Flex,{alignItems:"center",justifyContent:"center",direction:"column"},e.createElement(R.Icon,{as:oe(),color:"",width:"160px",height:"88px"}),e.createElement(d.Box,{paddingTop:6},e.createElement(b.Typography,{variant:"delta",as:"p",textColor:"neutral600"},n)))));H.propTypes={content:i().string.isRequired};const U=H;var G=r(22499),ue=r(24556),de=r.n(ue);const N=({isOnline:n,npmPackageType:l})=>{const{formatMessage:o}=(0,f.useIntl)(),{trackUsage:h}=(0,a.useTracking)(),m=l==="provider"?"didSubmitProvider":"didSubmitPlugin";return e.createElement(c.HeaderLayout,{title:o({id:"global.marketplace",defaultMessage:"Marketplace"}),subtitle:o({id:"admin.pages.MarketPlacePage.subtitle",defaultMessage:"Get more out of Strapi"}),primaryAction:n&&e.createElement(G.LinkButton,{startIcon:e.createElement(de(),null),variant:"tertiary",href:`https://market.strapi.io/submit-${l}`,onClick:()=>h(m),isExternal:!0},o({id:`admin.pages.MarketPlacePage.submit.${l}.link`,defaultMessage:`Submit ${l}`}))})},$=N;N.defaultProps={npmPackageType:"plugin"},N.propTypes={isOnline:i().bool.isRequired,npmPackageType:i().string};var pe=r(63955),ge=(n,l,o)=>new Promise((h,m)=>{var u=p=>{try{E(o.next(p))}catch(y){m(y)}},M=p=>{try{E(o.throw(p))}catch(y){m(y)}},E=p=>p.done?h(p.value):Promise.resolve(p.value).then(u,M);E((o=o.apply(n,l)).next())});const me=()=>ge(void 0,null,function*(){const{data:n}=yield pe.be.get("/admin/information");return n});var fe=r(35762),ve=r(9669),Y=r.n(ve),he=(n,l,o)=>new Promise((h,m)=>{var u=p=>{try{E(o.next(p))}catch(y){m(y)}},M=p=>{try{E(o.throw(p))}catch(y){m(y)}},E=p=>p.done?h(p.value):Promise.resolve(p.value).then(u,M);E((o=o.apply(n,l)).next())});const ye="https://market-api.strapi.io",Pe=()=>he(void 0,null,function*(){const{data:n}=yield Y().get(`${ye}/providers`);return n}),Ee=n=>{const l=(0,a.useNotification)();return(0,s.useQuery)("list-marketplace-providers",()=>Pe(),{onSuccess:()=>{n&&n()},onError:()=>{l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};var Me=Object.defineProperty,ke=Object.defineProperties,be=Object.getOwnPropertyDescriptors,z=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable,Q=(n,l,o)=>l in n?Me(n,l,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[l]=o,Se=(n,l)=>{for(var o in l||(l={}))xe.call(l,o)&&Q(n,o,l[o]);if(z)for(var o of z(l))Te.call(l,o)&&Q(n,o,l[o]);return n},Re=(n,l)=>ke(n,be(l)),Ie=(n,l,o)=>new Promise((h,m)=>{var u=p=>{try{E(o.next(p))}catch(y){m(y)}},M=p=>{try{E(o.throw(p))}catch(y){m(y)}},E=p=>p.done?h(p.value):Promise.resolve(p.value).then(u,M);E((o=o.apply(n,l)).next())});const Oe="https://market-api.strapi.io",Ce=()=>Ie(void 0,null,function*(){const{data:n}=yield Y().get(`${Oe}/plugins`);return Re(Se({},n),{data:n.data.filter(o=>o.attributes.strapiCompatibility==="v4")})}),Be=n=>{const l=(0,a.useNotification)();return(0,s.useQuery)("list-marketplace-plugins",()=>Ce(),{onSuccess:()=>{n&&n()},onError:()=>{l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}})};var Ne=r(92699),Le=r(87438);const je=()=>{const n=typeof navigator!="undefined"&&typeof navigator.onLine=="boolean"?navigator.onLine:!0,[l,o]=(0,e.useState)(n),h=()=>o(!0),m=()=>o(!1);return(0,e.useEffect)(()=>(window.addEventListener("online",h),window.addEventListener("offline",m),()=>{window.removeEventListener("online",h),window.removeEventListener("offline",m)}),[]),l};var we=r(29307),Ae=r.n(we),Fe=r(74657),W=r.n(Fe);const De=()=>{const{formatMessage:n}=(0,f.useIntl)(),{trackUsage:l}=(0,a.useTracking)();return e.createElement("a",{href:"https://strapi.canny.io/plugin-requests",target:"_blank",rel:"noopener noreferrer nofollow",style:{textDecoration:"none"},onClick:()=>l("didMissMarketplacePlugin")},e.createElement(a.ContentBox,{title:n({id:"admin.pages.MarketPlacePage.missingPlugin.title",defaultMessage:"Documentation"}),subtitle:n({id:"admin.pages.MarketPlacePage.missingPlugin.description",defaultMessage:"Tell us what plugin you are looking for and we'll let our community plugin developers know in case they are in search for inspiration!"}),icon:e.createElement(Ae(),null),iconBackground:"alternative100",endAction:e.createElement(R.Icon,{as:W(),color:"neutral600",width:3,height:3,marginLeft:2})}))};var Z=r(39272),He=r(9524),K=r(55639),Ue=r(37694),Ge=r.n(Ue),$e=r(22139),Ye=r(74855),ze=r(22754),Qe=r.n(ze),We=r(54279),Ze=r.n(We),Ke=r(64459);const V=({isInstalled:n,isInDevelopmentMode:l,commandToCopy:o})=>{const h=(0,a.useNotification)(),{formatMessage:m}=(0,f.useIntl)(),{trackUsage:u}=(0,a.useTracking)();return n?e.createElement(d.Box,{paddingLeft:4},e.createElement(R.Icon,{as:Qe(),marginRight:2,width:12,height:12,color:"success600"}),e.createElement(b.Typography,{variant:"omega",textColor:"success600",fontWeight:"bold"},m({id:"admin.pages.MarketPlacePage.plugin.installed",defaultMessage:"Installed"}))):l?e.createElement(Ye.CopyToClipboard,{onCopy:()=>{u("willInstallPlugin"),h({type:"success",message:{id:"admin.pages.MarketPlacePage.plugin.copy.success"}})},text:o},e.createElement(Ke.Button,{size:"S",startIcon:e.createElement(Ze(),null),variant:"secondary"},m({id:"admin.pages.MarketPlacePage.plugin.copy",defaultMessage:"Copy install command"}))):null};V.propTypes={isInstalled:i().bool.isRequired,isInDevelopmentMode:i().bool.isRequired,commandToCopy:i().string.isRequired};const Ve=V,Je=(0,D.default)(b.Typography)`
  /* stylelint-disable value-no-vendor-prefix, property-no-vendor-prefix */
  display: -webkit-box;
  -webkit-box-orient: vertical;
  -webkit-line-clamp: 2;
  /* stylelint-enable value-no-vendor-prefix, property-no-vendor-prefix */
  overflow: hidden;
`,L=({npmPackage:n,installedPackageNames:l,useYarn:o,isInDevelopmentMode:h,npmPackageType:m})=>{const{attributes:u}=n,{formatMessage:M}=(0,f.useIntl)(),{trackUsage:E}=(0,a.useTracking)(),p=l.includes(u.npmPackageName),y=o?`yarn add ${u.npmPackageName}`:`npm install ${u.npmPackageName}`,I=M({id:"admin.pages.MarketPlacePage.plugin.tooltip.madeByStrapi",defaultMessage:"Made by Strapi"}),w=m==="provider"?u.npmPackageUrl:`https://market.strapi.io/plugins/${u.slug}`;return e.createElement(S.Flex,{direction:"column",justifyContent:"space-between",paddingTop:4,paddingRight:4,paddingBottom:4,paddingLeft:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",height:"100%",alignItems:"normal"},e.createElement(d.Box,null,e.createElement(d.Box,{as:"img",src:u.logo.url,alt:`${u.name} logo`,hasRadius:!0,width:11,height:11}),e.createElement(d.Box,{paddingTop:4},e.createElement(b.Typography,{as:"h3",variant:"delta"},e.createElement(S.Flex,{alignItems:"center"},u.name,u.validated&&!u.madeByStrapi&&e.createElement(K.Tooltip,{description:M({id:"admin.pages.MarketPlacePage.plugin.tooltip.verified",defaultMessage:"Plugin verified by Strapi"})},e.createElement(S.Flex,null,e.createElement(R.Icon,{as:Ge(),marginLeft:2,color:"success600"}))),u.madeByStrapi&&e.createElement(K.Tooltip,{description:I},e.createElement(S.Flex,null,e.createElement(d.Box,{as:"img",src:$e,alt:I,marginLeft:1,width:6,height:"auto"})))))),e.createElement(d.Box,{paddingTop:2},e.createElement(Je,{as:"p",variant:"omega",textColor:"neutral600"},u.description))),e.createElement(He.Stack,{horizontal:!0,spacing:2,style:{alignSelf:"flex-end"},paddingTop:6},e.createElement(G.LinkButton,{size:"S",href:w,isExternal:!0,endIcon:e.createElement(W(),null),"aria-label":M({id:"admin.pages.MarketPlacePage.plugin.info.label",defaultMessage:"Learn more about {pluginName}"},{pluginName:u.name}),variant:"tertiary",onClick:()=>E("didPluginLearnMore")},M({id:"admin.pages.MarketPlacePage.plugin.info.text",defaultMessage:"Learn more"})),e.createElement(Ve,{isInstalled:p,isInDevelopmentMode:h,commandToCopy:y})))};L.defaultProps={isInDevelopmentMode:!1},L.propTypes={npmPackage:i().shape({id:i().string.isRequired,attributes:i().shape({name:i().string.isRequired,description:i().string.isRequired,slug:i().string.isRequired,npmPackageName:i().string.isRequired,npmPackageUrl:i().string.isRequired,repositoryUrl:i().string.isRequired,logo:i().object.isRequired,developerName:i().string.isRequired,validated:i().bool.isRequired,madeByStrapi:i().bool.isRequired,strapiCompatibility:i().oneOf(["v3","v4"])}).isRequired}).isRequired,installedPackageNames:i().arrayOf(i().string).isRequired,useYarn:i().bool.isRequired,isInDevelopmentMode:i().bool,npmPackageType:i().string.isRequired};const Xe=L,j=({npmPackages:n,installedPackageNames:l,useYarn:o,isInDevelopmentMode:h,npmPackageType:m})=>e.createElement(Z.Grid,{gap:4},n.map(u=>e.createElement(Z.GridItem,{col:4,s:6,xs:12,style:{height:"100%"},key:u.id},e.createElement(Xe,{npmPackage:u,installedPackageNames:l,useYarn:o,isInDevelopmentMode:h,npmPackageType:m}))));j.defaultProps={installedPackageNames:[]},j.propTypes={npmPackages:i().array.isRequired,installedPackageNames:i().arrayOf(i().string),useYarn:i().bool.isRequired,isInDevelopmentMode:i().bool.isRequired,npmPackageType:i().string.isRequired};const J=j,X=(n,l)=>(0,t.ZP)(n,l,{keys:[{threshold:t.ZP.rankings.WORD_STARTS_WITH,key:"attributes.name"},{threshold:t.ZP.rankings.WORD_STARTS_WITH,key:"attributes.description"}]}),q=()=>{const{formatMessage:n}=(0,f.useIntl)(),{trackUsage:l}=(0,a.useTracking)(),{notifyStatus:o}=(0,B.useNotifyAT)(),h=(0,e.useRef)(l),m=(0,a.useNotification)(),[u,M]=(0,e.useState)(""),[E,p]=(0,e.useState)("plugin"),{autoReload:y}=(0,a.useAppInfos)(),I=je();(0,a.useFocusWhenNavigate)();const w=n({id:"global.marketplace",defaultMessage:"Marketplace"}),_=()=>{o(n({id:"app.utils.notify.data-loaded",defaultMessage:"The {target} has loaded"},{target:w}))},{status:ee,data:_e}=Be(_),{status:te,data:et}=Ee(_),{status:ae,data:tt}=(0,fe.Z)(),{data:ne,status:re}=(0,s.useQuery)("app-information",me,{onError:()=>{m({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),at=[ee,te,ae,re].includes("loading"),nt=[ee,te,ae,re].includes("error");if((0,e.useEffect)(()=>{h.current("didGoToMarketplace")},[]),(0,e.useEffect)(()=>{y||m({type:"info",message:{id:"admin.pages.MarketPlacePage.production",defaultMessage:"Manage plugins from the development environment"},blockTransition:!0})},[m,y]),!I)return e.createElement(c.Layout,null,e.createElement(g.Main,null,e.createElement($,{isOnline:I}),e.createElement(S.Flex,{width:"100%",direction:"column",alignItems:"center",justifyContent:"center",style:{paddingTop:"120px"}},e.createElement(d.Box,{paddingBottom:2},e.createElement(b.Typography,{textColor:"neutral700",variant:"alpha"},n({id:"admin.pages.MarketPlacePage.offline.title",defaultMessage:"You are offline"}))),e.createElement(d.Box,{paddingBottom:6},e.createElement(b.Typography,{textColor:"neutral700",variant:"epsilon"},n({id:"admin.pages.MarketPlacePage.offline.subtitle",defaultMessage:"You need to be connected to the Internet to access Strapi Market."}))),e.createElement("img",{src:Le,alt:"offline",style:{width:"88px",height:"88px"}}))));if(nt)return e.createElement(c.Layout,null,e.createElement(c.ContentLayout,null,e.createElement(d.Box,{paddingTop:8},e.createElement(a.AnErrorOccurred,null))));if(at)return e.createElement(c.Layout,null,e.createElement(g.Main,{"aria-busy":!0},e.createElement(a.LoadingIndicatorPage,null)));const A=X(_e.data,u),F=X(et.data,u),se=n({id:"admin.pages.MarketPlacePage.search.empty",defaultMessage:'No result for "{target}"'},{target:u}),rt=C=>{p(C===0?"plugin":"provider")},st=tt.plugins.map(C=>C.packageName);return e.createElement(c.Layout,null,e.createElement(g.Main,null,e.createElement(v.Helmet,{title:n({id:"admin.pages.MarketPlacePage.helmet",defaultMessage:"Marketplace - Plugins"})}),e.createElement($,{isOnline:I,npmPackageType:E}),e.createElement(c.ContentLayout,null,e.createElement(d.Box,{width:"25%",paddingBottom:4},e.createElement(P.Searchbar,{name:"searchbar",onClear:()=>M(""),value:u,onChange:C=>M(C.target.value),clearLabel:n({id:"admin.pages.MarketPlacePage.search.clear",defaultMessage:"Clear the search"}),placeholder:n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"})},n({id:"admin.pages.MarketPlacePage.search.placeholder",defaultMessage:"Search"}))),e.createElement(x.TabGroup,{label:n({id:"admin.pages.MarketPlacePage.tab-group.label",defaultMessage:"Plugins and Providers for Strapi"}),id:"tabs",variant:"simple",onTabChange:rt},e.createElement(d.Box,{paddingBottom:4},e.createElement(x.Tabs,null,e.createElement(x.Tab,null,n({id:"admin.pages.MarketPlacePage.plugins",defaultMessage:"Plugins"})," ","(",A.length,")"),e.createElement(x.Tab,null,n({id:"admin.pages.MarketPlacePage.providers",defaultMessage:"Providers"})," ","(",F.length,")"))),e.createElement(x.TabPanels,null,e.createElement(x.TabPanel,null,u.length>0&&!A.length?e.createElement(U,{content:se}):e.createElement(J,{npmPackages:A,installedPackageNames:st,useYarn:ne.data.useYarn,isInDevelopmentMode:y,npmPackageType:"plugin"})),e.createElement(x.TabPanel,null,u.length>0&&!F.length?e.createElement(U,{content:se}):e.createElement(J,{npmPackages:F,useYarn:ne.data.useYarn,isInDevelopmentMode:y,npmPackageType:"provider"})))),e.createElement(d.Box,{paddingTop:7},e.createElement(De,null)))))},qe=()=>e.createElement(a.CheckPagePermissions,{permissions:Ne.Z.marketplace.main},e.createElement(q,null))},22139:(k,T,r)=>{"use strict";k.exports=r.p+"90f49a385afb000fb1d4.svg"},87438:(k,T,r)=>{"use strict";k.exports=r.p+"a6b842e0b6d2b61135d1.svg"}}]);
